<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Bed Management System</title>
  <style>
    :root {
      --primary: #6a9ac4;      /* Calm Blue */
      --accent: #9ed5cb;       /* Mint Green */
      --highlight: #b8a4d4;    /* Soft Purple */
      --bg-light: #f0f6f6;     /* Light soothing background */
      --card-bg: #ffffff;
      --text-dark: #333;
      --text-muted: #555;
      --success: #4CAF50;
      --warning: #FF9800;
      --danger: #F44336;
      --info: #2196F3;
    }

    body {
      font-family: 'Segoe UI', sans-serif;
      margin: 0;
      padding: 0;
      background-color: var(--bg-light);
    }

    .container {
      max-width: 1400px;
      margin: 0 auto;
      background-color: var(--card-bg);
      min-height: 100vh;
      padding: 20px;
      box-shadow: 0 0 20px rgba(106, 154, 196, 0.1);
    }

    h1 {
      text-align: center;
      color: var(--primary);
      background: linear-gradient(45deg, var(--primary), var(--accent));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      font-size: 2.8em;
      margin-bottom: 30px;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
    }

    /* Sidebar Styles */
    .sidebar {
      position: fixed;
      left: -250px;
      top: 0;
      width: 250px;
      height: 100vh;
      background: linear-gradient(135deg, var(--primary), var(--accent));
      color: white;
      transition: left 0.3s ease;
      z-index: 1000;
      overflow-y: auto;
    }

    .sidebar.open {
      left: 0;
    }

    .sidebar-header {
      padding: 20px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.2);
    }

    .sidebar-header h2 {
      margin: 0;
      font-size: 1.5em;
    }

    .sidebar-nav {
      padding: 0;
      list-style: none;
      margin: 0;
    }

    .sidebar-nav li {
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }

    .sidebar-nav a {
      display: block;
      padding: 15px 20px;
      color: white;
      text-decoration: none;
      transition: background-color 0.3s ease;
    }

    .sidebar-nav a:hover {
      background-color: rgba(255, 255, 255, 0.1);
    }

    .sidebar-nav a.active {
      background-color: rgba(255, 255, 255, 0.2);
      border-left: 4px solid white;
    }

    .sidebar-nav a i {
      margin-right: 10px;
      width: 20px;
      text-align: center;
    }

    .menu-btn {
      position: fixed;
      top: 20px;
      left: 20px;
      background: var(--primary);
      color: white;
      border: none;
      padding: 12px 16px;
      border-radius: 8px;
      cursor: pointer;
      z-index: 1001;
      font-size: 18px;
      box-shadow: 0 4px 12px rgba(106, 154, 196, 0.3);
      transition: all 0.3s ease;
    }

    .menu-btn:hover {
      background: var(--accent);
      transform: translateY(-2px);
    }

    .overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      z-index: 999;
      display: none;
    }

    .overlay.show {
      display: block;
    }

    .main-content {
      transition: margin-left 0.3s ease;
    }

    .main-content.shifted {
      margin-left: 250px;
    }

    /* Ward Selection */
    .ward-selector {
      background: linear-gradient(135deg, var(--primary), var(--accent));
      padding: 25px;
      border-radius: 15px;
      margin-bottom: 30px;
      box-shadow: 0 8px 25px rgba(106, 154, 196, 0.2);
    }

    .ward-selector h2 {
      color: white;
      margin: 0 0 15px 0;
      font-size: 1.5em;
    }

    .ward-dropdown {
      width: 100%;
      max-width: 300px;
      padding: 12px 16px;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      background: white;
      color: var(--text-dark);
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .ward-dropdown:focus {
      outline: none;
      box-shadow: 0 6px 20px rgba(106, 154, 196, 0.3);
      transform: translateY(-2px);
    }

    /* Statistics Cards */
    .stats-section {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
    }

    .stat-card {
      background: white;
      padding: 25px;
      border-radius: 15px;
      box-shadow: 0 8px 25px rgba(0,0,0,0.08);
      text-align: center;
      transition: all 0.3s ease;
      border-left: 5px solid;
    }

    .stat-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 12px 35px rgba(0,0,0,0.12);
    }

    .stat-card.total { border-left-color: var(--info); }
    .stat-card.available { border-left-color: var(--success); }
    .stat-card.occupied { border-left-color: var(--warning); }
    .stat-card.maintenance { border-left-color: var(--danger); }

    .stat-number {
      font-size: 2.5em;
      font-weight: bold;
      margin-bottom: 10px;
    }

    .stat-card.total .stat-number { color: var(--info); }
    .stat-card.available .stat-number { color: var(--success); }
    .stat-card.occupied .stat-number { color: var(--warning); }
    .stat-card.maintenance .stat-number { color: var(--danger); }

    .stat-label {
      color: var(--text-muted);
      font-weight: 500;
    }

    /* Bed Visualization */
    .beds-section {
      background: white;
      padding: 30px;
      border-radius: 15px;
      box-shadow: 0 8px 25px rgba(0,0,0,0.08);
      margin-bottom: 20px;
    }

    .beds-section h2 {
      color: var(--primary);
      margin-bottom: 25px;
      font-size: 1.8em;
    }

    .beds-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
      gap: 15px;
      margin-top: 20px;
    }

    .bed-item {
      position: relative;
      aspect-ratio: 1.5/1;
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      color: white;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }

    .bed-item:hover {
      transform: translateY(-3px) scale(1.05);
      box-shadow: 0 8px 25px rgba(0,0,0,0.2);
    }

    .bed-item.available {
      background: linear-gradient(135deg, var(--success), #66BB6A);
    }

    .bed-item.occupied {
      background: linear-gradient(135deg, var(--warning), #FFB74D);
    }

    .bed-item.maintenance {
      background: linear-gradient(135deg, var(--danger), #EF5350);
    }

    .bed-number {
      font-size: 1.2em;
      margin-bottom: 5px;
    }

    .bed-status {
      font-size: 0.8em;
      opacity: 0.9;
    }

    .patient-name {
      font-size: 0.7em;
      margin-top: 5px;
      opacity: 0.8;
    }

    /* Modal Styles */
    .modal {
      display: none;
      position: fixed;
      z-index: 2000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0,0,0,0.5);
      backdrop-filter: blur(5px);
    }

    .modal-content {
      background-color: white;
      margin: 5% auto;
      padding: 30px;
      border-radius: 20px;
      width: 90%;
      max-width: 600px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.2);
      animation: modalSlideIn 0.3s ease;
    }

    @keyframes modalSlideIn {
      from { opacity: 0; transform: translateY(-50px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .modal h3 {
      color: var(--primary);
      margin-bottom: 25px;
      font-size: 1.8em;
      text-align: center;
    }

    .form-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      margin-bottom: 25px;
    }

    .form-group {
      display: flex;
      flex-direction: column;
    }

    .form-group.full-width {
      grid-column: 1 / -1;
    }

    .form-group label {
      color: var(--text-muted);
      margin-bottom: 8px;
      font-weight: 500;
    }

    .form-group input,
    .form-group select,
    .form-group textarea {
      padding: 12px 16px;
      border: 2px solid #E0E0E0;
      border-radius: 8px;
      font-size: 14px;
      transition: all 0.3s ease;
    }

    .form-group input:focus,
    .form-group select:focus,
    .form-group textarea:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(106, 154, 196, 0.1);
    }

    .form-actions {
      display: flex;
      gap: 15px;
      justify-content: center;
      margin-top: 30px;
    }

    .btn {
      padding: 12px 30px;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s ease;
      min-width: 120px;
    }

    .btn-primary {
      background: linear-gradient(135deg, var(--primary), var(--accent));
      color: white;
    }

    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(106, 154, 196, 0.3);
    }

    .btn-secondary {
      background: #E0E0E0;
      color: var(--text-dark);
    }

    .btn-secondary:hover {
      background: #BDBDBD;
    }

    .btn-danger {
      background: linear-gradient(135deg, var(--danger), #EF5350);
      color: white;
    }

    .btn-danger:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(244, 67, 54, 0.3);
    }

    /* Legend */
    .legend {
      display: flex;
      justify-content: center;
      gap: 30px;
      margin-bottom: 20px;
      flex-wrap: wrap;
    }

    .legend-item {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .legend-color {
      width: 20px;
      height: 20px;
      border-radius: 4px;
    }

    .legend-color.available { background: var(--success); }
    .legend-color.occupied { background: var(--warning); }
    .legend-color.maintenance { background: var(--danger); }

    @media (max-width: 768px) {
      .form-grid {
        grid-template-columns: 1fr;
      }
      
      .stats-section {
        grid-template-columns: repeat(2, 1fr);
      }
      
      .beds-grid {
        grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
      }
    }
  </style>
</head>
<body>
  <!-- Menu Button -->
  <button class="menu-btn" id="menu-btn">☰</button>

  <!-- Sidebar -->
  <nav class="sidebar" id="sidebar">
    <div class="sidebar-header">
      <h2>🏥 Hospital System</h2>
    </div>
    <ul class="sidebar-nav">
      <li><a href="index.html"><i>🏠</i> Dashboard</a></li>
      <li><a href="beds.html" class="active"><i>🛏️</i> Bed Management</a></li>
      <li><a href="patients.html"><i>👥</i> Patient Management</a></li>
      <li><a href="staff.html"><i>👨‍⚕️</i> Staff Management</a></li>
      <li><a href="inventory.html"><i>💊</i> Inventory Management</a></li>
      <li><a href="hospital.html"><i>🏥</i> Hospital Info</a></li>
      <li><a href="drugCheck.html"><i>💊</i> Drug Checker</a></li>
    </ul>
  </nav>

  <!-- Overlay -->
  <div class="overlay" id="overlay"></div>

  <!-- Main Content -->
  <div class="main-content" id="main-content">
  <div class="container">
    <h1>🛏️ Bed Management System</h1>
    
    <!-- Ward Selection -->
    <div class="ward-selector">
      <h2>📍 Select Ward</h2>
      <select class="ward-dropdown" id="ward-select">
        <option value="emergency">🚨 Emergency Ward</option>
        <option value="general">🏥 General Ward</option>
        <option value="icu">🩺 Intensive Care Unit</option>
      </select>
    </div>

    <!-- Statistics Section -->
    <div class="stats-section">
      <div class="stat-card total">
        <div class="stat-number" id="total-beds">0</div>
        <div class="stat-label">Total Beds</div>
      </div>
      <div class="stat-card available">
        <div class="stat-number" id="available-beds">0</div>
        <div class="stat-label">Available</div>
      </div>
      <div class="stat-card occupied">
        <div class="stat-number" id="occupied-beds">0</div>
        <div class="stat-label">Occupied</div>
      </div>
      <div class="stat-card maintenance">
        <div class="stat-number" id="maintenance-beds">0</div>
        <div class="stat-label">Maintenance</div>
      </div>
    </div>

    <!-- Bed Visualization -->
    <div class="beds-section">
      <h2>🛏️ <span id="current-ward-name">Emergency Ward</span> Layout</h2>
      
      <!-- Legend -->
      <div class="legend">
        <div class="legend-item">
          <div class="legend-color available"></div>
          <span>Available</span>
        </div>
        <div class="legend-item">
          <div class="legend-color occupied"></div>
          <span>Occupied</span>
        </div>
        <div class="legend-item">
          <div class="legend-color maintenance"></div>
          <span>Maintenance</span>
        </div>
      </div>

      <div class="beds-grid" id="beds-grid">
        <!-- Beds will be dynamically generated here -->
      </div>
    </div>

    <!-- Modal for Bed Management -->
    <div class="modal" id="bed-modal">
      <div class="modal-content">
        <h3 id="modal-title">Bed Information</h3>
        <form id="bed-form">
          <div class="form-grid">
            <div class="form-group">
              <label for="bed-number">Bed Number:</label>
              <input type="text" id="bed-number" readonly>
            </div>
            <div class="form-group">
              <label for="bed-status">Status:</label>
              <select id="bed-status">
                <option value="available">Available</option>
                <option value="occupied">Occupied</option>
                <option value="maintenance">Maintenance</option>
              </select>
            </div>
            <div class="form-group">
              <label for="room-number">Room Number:</label>
              <input type="text" id="room-number">
            </div>
            <div class="form-group">
              <label for="bed-type">Bed Type:</label>
              <select id="bed-type">
                <option value="standard">Standard</option>
                <option value="monitor">Monitor Bed</option>
                <option value="isolation">Isolation</option>
                <option value="intensive">Intensive Care</option>
              </select>
            </div>
            <div class="form-group full-width" id="patient-section">
              <label for="patient-name">Assigned Patient:</label>
              <input type="text" id="patient-name" placeholder="Enter patient name or ID">
            </div>
            <div class="form-group full-width">
              <label for="notes">Notes:</label>
              <textarea id="notes" rows="3" placeholder="Additional notes or comments"></textarea>
            </div>
          </div>
          <div class="form-actions">
            <button type="submit" class="btn btn-primary">Save Changes</button>
            <button type="button" class="btn btn-secondary" id="cancel-btn">Cancel</button>
            <button type="button" class="btn btn-danger" id="discharge-btn" style="display: none;">Discharge Patient</button>
          </div>
        </form>
      </div>
    </div>
  </div>
  </div>

  <script>
    // Sample bed data - in production this would come from API
    const bedsData = {
      emergency: [
        { id: 'E001', room: '101', status: 'occupied', patient: 'John Smith', type: 'monitor', notes: 'Stable condition' },
        { id: 'E002', room: '101', status: 'available', patient: null, type: 'standard', notes: '' },
        { id: 'E003', room: '102', status: 'occupied', patient: 'Sarah Johnson', type: 'intensive', notes: 'Critical monitoring' },
        { id: 'E004', room: '102', status: 'maintenance', patient: null, type: 'standard', notes: 'Equipment repair' },
        { id: 'E005', room: '103', status: 'available', patient: null, type: 'isolation', notes: '' },
        { id: 'E006', room: '103', status: 'occupied', patient: 'Mike Davis', type: 'monitor', notes: 'Post-surgery' },
        { id: 'E007', room: '104', status: 'available', patient: null, type: 'standard', notes: '' },
        { id: 'E008', room: '104', status: 'available', patient: null, type: 'standard', notes: '' },
        { id: 'E009', room: '105', status: 'occupied', patient: 'Lisa Brown', type: 'intensive', notes: 'Recovery phase' },
        { id: 'E010', room: '105', status: 'maintenance', patient: null, type: 'monitor', notes: 'Software update' },
        { id: 'E011', room: '106', status: 'available', patient: null, type: 'standard', notes: '' },
        { id: 'E012', room: '106', status: 'occupied', patient: 'Tom Wilson', type: 'isolation', notes: 'Infection control' }
      ],
      general: [
        { id: 'G001', room: '201', status: 'occupied', patient: 'Emma Taylor', type: 'standard', notes: 'Regular checkup' },
        { id: 'G002', room: '201', status: 'available', patient: null, type: 'standard', notes: '' },
        { id: 'G003', room: '202', status: 'occupied', patient: 'James Miller', type: 'standard', notes: 'Recovery' },
        { id: 'G004', room: '202', status: 'available', patient: null, type: 'standard', notes: '' },
        { id: 'G005', room: '203', status: 'maintenance', patient: null, type: 'standard', notes: 'Deep cleaning' },
        { id: 'G006', room: '203', status: 'occupied', patient: 'Anna Garcia', type: 'monitor', notes: 'Observation' },
        { id: 'G007', room: '204', status: 'available', patient: null, type: 'standard', notes: '' },
        { id: 'G008', room: '204', status: 'available', patient: null, type: 'standard', notes: '' },
        { id: 'G009', room: '205', status: 'occupied', patient: 'David Lee', type: 'standard', notes: 'Rehabilitation' },
        { id: 'G010', room: '205', status: 'occupied', patient: 'Maria Rodriguez', type: 'standard', notes: 'Post-op care' },
        { id: 'G011', room: '206', status: 'available', patient: null, type: 'monitor', notes: '' },
        { id: 'G012', room: '206', status: 'available', patient: null, type: 'standard', notes: '' },
        { id: 'G013', room: '207', status: 'occupied', patient: 'Robert Chen', type: 'standard', notes: 'Extended stay' },
        { id: 'G014', room: '207', status: 'maintenance', patient: null, type: 'standard', notes: 'Equipment check' },
        { id: 'G015', room: '208', status: 'available', patient: null, type: 'standard', notes: '' },
        { id: 'G016', room: '208', status: 'occupied', patient: 'Jennifer White', type: 'monitor', notes: 'Monitoring vitals' }
      ],
      icu: [
        { id: 'I001', room: '301', status: 'occupied', patient: 'Alex Thompson', type: 'intensive', notes: 'Ventilator support' },
        { id: 'I002', room: '301', status: 'occupied', patient: 'Grace Kim', type: 'intensive', notes: 'Critical condition' },
        { id: 'I003', room: '302', status: 'available', patient: null, type: 'intensive', notes: '' },
        { id: 'I004', room: '302', status: 'occupied', patient: 'Carlos Martinez', type: 'intensive', notes: 'Post-surgery ICU' },
        { id: 'I005', room: '303', status: 'maintenance', patient: null, type: 'intensive', notes: 'Ventilator maintenance' },
        { id: 'I006', room: '303', status: 'occupied', patient: 'Diana Foster', type: 'intensive', notes: 'Cardiac monitoring' },
        { id: 'I007', room: '304', status: 'available', patient: null, type: 'intensive', notes: '' },
        { id: 'I008', room: '304', status: 'occupied', patient: 'Kevin Park', type: 'intensive', notes: 'Neurological care' }
      ]
    };

    let currentWard = 'emergency';
    let selectedBed = null;

    // Sidebar functionality
    const menuBtn = document.getElementById('menu-btn');
    const sidebar = document.getElementById('sidebar');
    const overlay = document.getElementById('overlay');
    const mainContent = document.getElementById('main-content');

    menuBtn.addEventListener('click', function() {
      sidebar.classList.toggle('open');
      overlay.classList.toggle('show');
      mainContent.classList.toggle('shifted');
    });

    overlay.addEventListener('click', function() {
      sidebar.classList.remove('open');
      overlay.classList.remove('show');
      mainContent.classList.remove('shifted');
    });

    // Initialize page
    document.addEventListener('DOMContentLoaded', function() {
      console.log('Bed Management page loaded');
      
      // Event listeners
      document.getElementById('ward-select').addEventListener('change', handleWardChange);
      document.getElementById('bed-form').addEventListener('submit', handleBedUpdate);
      document.getElementById('cancel-btn').addEventListener('click', closeBedModal);
      document.getElementById('discharge-btn').addEventListener('click', handleDischarge);
      
      // Load initial data
      loadBeds();
      updateStats();
    });

    function handleWardChange(e) {
      currentWard = e.target.value;
      updateWardName();
      loadBeds();
      updateStats();
    }

    function updateWardName() {
      const wardNames = {
        emergency: 'Emergency Ward',
        general: 'General Ward',
        icu: 'Intensive Care Unit'
      };
      document.getElementById('current-ward-name').textContent = wardNames[currentWard];
    }

    function loadBeds() {
      const bedsGrid = document.getElementById('beds-grid');
      const beds = bedsData[currentWard];
      
      bedsGrid.innerHTML = '';
      
      beds.forEach(bed => {
        const bedElement = createBedElement(bed);
        bedsGrid.appendChild(bedElement);
      });
    }

    function createBedElement(bed) {
      const bedDiv = document.createElement('div');
      bedDiv.className = `bed-item ${bed.status}`;
      bedDiv.onclick = () => openBedModal(bed);
      
      let content = `
        <div class="bed-number">${bed.id}</div>
        <div class="bed-status">${bed.status.charAt(0).toUpperCase() + bed.status.slice(1)}</div>
      `;
      
      if (bed.patient && bed.status === 'occupied') {
        content += `<div class="patient-name">${bed.patient}</div>`;
      }
      
      bedDiv.innerHTML = content;
      return bedDiv;
    }

    function updateStats() {
      const beds = bedsData[currentWard];
      const stats = {
        total: beds.length,
        available: beds.filter(b => b.status === 'available').length,
        occupied: beds.filter(b => b.status === 'occupied').length,
        maintenance: beds.filter(b => b.status === 'maintenance').length
      };
      
      document.getElementById('total-beds').textContent = stats.total;
      document.getElementById('available-beds').textContent = stats.available;
      document.getElementById('occupied-beds').textContent = stats.occupied;
      document.getElementById('maintenance-beds').textContent = stats.maintenance;
    }

    function openBedModal(bed) {
      selectedBed = bed;
      const modal = document.getElementById('bed-modal');
      
      // Populate form
      document.getElementById('bed-number').value = bed.id;
      document.getElementById('bed-status').value = bed.status;
      document.getElementById('room-number').value = bed.room;
      document.getElementById('bed-type').value = bed.type;
      document.getElementById('patient-name').value = bed.patient || '';
      document.getElementById('notes').value = bed.notes || '';
      
      // Show/hide discharge button
      const dischargeBtn = document.getElementById('discharge-btn');
      if (bed.status === 'occupied' && bed.patient) {
        dischargeBtn.style.display = 'inline-block';
      } else {
        dischargeBtn.style.display = 'none';
      }
      
      // Update modal title
      document.getElementById('modal-title').textContent = `Bed ${bed.id} - Room ${bed.room}`;
      
      // Show patient section only if bed can have patients
      const patientSection = document.getElementById('patient-section');
      if (document.getElementById('bed-status').value === 'maintenance') {
        patientSection.style.display = 'none';
      } else {
        patientSection.style.display = 'block';
      }
      
      modal.style.display = 'block';
    }

    function closeBedModal() {
      document.getElementById('bed-modal').style.display = 'none';
      selectedBed = null;
    }

    function handleBedUpdate(e) {
      e.preventDefault();
      
      if (!selectedBed) return;
      
      // Get form values
      const newStatus = document.getElementById('bed-status').value;
      const newRoom = document.getElementById('room-number').value;
      const newType = document.getElementById('bed-type').value;
      const newPatient = document.getElementById('patient-name').value.trim();
      const newNotes = document.getElementById('notes').value.trim();
      
      // Validation
      if (newStatus === 'occupied' && !newPatient) {
        alert('Please enter a patient name for occupied beds.');
        return;
      }
      
      if (newStatus !== 'occupied' && newPatient) {
        alert('Cannot assign patient to non-occupied bed.');
        return;
      }
      
      // Update bed data
      selectedBed.status = newStatus;
      selectedBed.room = newRoom;
      selectedBed.type = newType;
      selectedBed.patient = newStatus === 'occupied' ? newPatient : null;
      selectedBed.notes = newNotes;
      
      // Refresh display
      loadBeds();
      updateStats();
      closeBedModal();
      
      // Show success message
      showNotification(`Bed ${selectedBed.id} updated successfully!`, 'success');
    }

    function handleDischarge() {
      if (!selectedBed || selectedBed.status !== 'occupied') return;
      
      if (confirm(`Are you sure you want to discharge ${selectedBed.patient} from bed ${selectedBed.id}?`)) {
        selectedBed.status = 'available';
        selectedBed.patient = null;
        selectedBed.notes = 'Recently discharged - ready for cleaning';
        
        loadBeds();
        updateStats();
        closeBedModal();
        
        showNotification(`Patient discharged from bed ${selectedBed.id}`, 'success');
      }
    }

    function showNotification(message, type = 'info') {
      // Create notification element
      const notification = document.createElement('div');
      notification.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        padding: 15px 20px;
        border-radius: 8px;
        color: white;
        font-weight: 500;
        z-index: 3000;
        opacity: 0;
        transform: translateX(100%);
        transition: all 0.3s ease;
      `;
      
      // Set colors based on type
      switch(type) {
        case 'success':
          notification.style.background = 'linear-gradient(135deg, #4CAF50, #66BB6A)';
          break;
        case 'error':
          notification.style.background = 'linear-gradient(135deg, #F44336, #EF5350)';
          break;
        default:
          notification.style.background = 'linear-gradient(135deg, #2196F3, #42A5F5)';
      }
      
      notification.textContent = message;
      document.body.appendChild(notification);
      
      // Animate in
      setTimeout(() => {
        notification.style.opacity = '1';
        notification.style.transform = 'translateX(0)';
      }, 100);
      
      // Remove after 3 seconds
      setTimeout(() => {
        notification.style.opacity = '0';
        notification.style.transform = 'translateX(100%)';
        setTimeout(() => {
          if (notification.parentNode) {
            notification.parentNode.removeChild(notification);
          }
        }, 300);
      }, 3000);
    }

    // Status change handler for the form
    document.addEventListener('DOMContentLoaded', function() {
      const statusSelect = document.getElementById('bed-status');
      const patientSection = document.getElementById('patient-section');
      
      if (statusSelect && patientSection) {
        statusSelect.addEventListener('change', function() {
          if (this.value === 'maintenance') {
            patientSection.style.display = 'none';
            document.getElementById('patient-name').value = '';
          } else {
            patientSection.style.display = 'block';
          }
        });
      }
    });
  </script>
</body>
</html>
